<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Electron Launch Handler Test App</title>
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        padding: 20px;
        background: #1e1e1e;
        color: #fff;
      }
      h1 {
        color: #61dafb;
      }
      .log {
        background: #2d2d2d;
        border-radius: 8px;
        padding: 15px;
        font-family: monospace;
        font-size: 14px;
        white-space: pre-wrap;
        max-height: 400px;
        overflow-y: auto;
      }
      .deep-link {
        color: #98c379;
      }
      .info {
        color: #61afef;
      }
    </style>
  </head>
  <body>
    <h1>ðŸš€ Electron Launch Handler Test App</h1>
    <p class="info">App is ready and listening for deep links...</p>
    <h2>Deep Link Log:</h2>
    <div id="log" class="log"></div>

    <script>
      const { ipcRenderer } = require('electron')
      const logEl = document.getElementById('log')

      function log(message, className = '') {
        const line = document.createElement('div')
        line.textContent = `[${new Date().toISOString()}] ${message}`
        if (className) line.className = className
        logEl.appendChild(line)
        logEl.scrollTop = logEl.scrollHeight
      }

      log('Renderer process started', 'info')

      ipcRenderer.on('deep-link', (event, url) => {
        log(`Received deep link: ${url}`, 'deep-link')

        // Parse and display URL components
        try {
          const parsed = new URL(url)
          log(`  Protocol: ${parsed.protocol}`)
          log(`  Host: ${parsed.host}`)
          log(`  Path: ${parsed.pathname}`)
          log(`  Search: ${parsed.search}`)
        } catch (e) {
          log(`  Failed to parse: ${e.message}`)
        }
      })
    </script>
  </body>
</html>
